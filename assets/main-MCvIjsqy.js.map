{"version":3,"file":"main-MCvIjsqy.js","sources":["../../src/img/sprite.svg","../../src/js/ui/notifications.js","../../src/js/api/exercises.js","../../src/partials/workout-tile.html?raw","../../src/partials/section-tile.html?raw","../../src/partials/favorites-empty.html?raw","../../src/partials/pager.html?raw","../../src/js/templates/renderer.js","../../src/js/utils/dom.js","../../src/js/ui/pagination.js","../../src/js/ui/modal.js","../../src/js/ui/rating-modal.js","../../src/js/services/favorites-store.js","../../src/js/ui/exercise-modal.js","../../src/js/services/motivation.js","../../src/js/utils/responsive.js","../../src/js/pages/home.js","../../src/js/pages/favorites.js","../../src/js/components/nav.js","../../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__DLeFggG$__\"","/**\n * Notification system\n */\n\nimport spriteUrl from '../../img/sprite.svg';\n\nconst ICONS = {\n  success: 'icon-info',\n  error: 'icon-close',\n  warning: 'icon-star',\n  info: 'icon-info',\n};\n\nconst AUTO_CLOSE_DELAY = 3000;\nconst FADE_DURATION = 500;\n\n/**\n * Get or create notification container\n */\nfunction getContainer() {\n  let container = document.getElementById('notification-container');\n\n  if (!container) {\n    container = document.createElement('div');\n    container.id = 'notification-container';\n    document.body.appendChild(container);\n  }\n\n  return container;\n}\n\n/**\n * Create and show notification\n * @param {string} type - success | error | warning | info\n * @param {string} message\n */\nfunction createNotification(type, message) {\n  const container = getContainer();\n  const iconName = ICONS[type] || ICONS.info;\n\n  const notification = document.createElement('div');\n  notification.className = `notification notification-${type}`;\n  notification.innerHTML = `\n    <svg class=\"notification-icon\" width=\"20\" height=\"20\">\n      <use href=\"${spriteUrl}#${iconName}\"></use>\n    </svg>\n    <p class=\"notification-message\">${message}</p>\n  `;\n\n  container.appendChild(notification);\n\n  setTimeout(() => {\n    notification.classList.add('fade-out');\n    setTimeout(() => notification.remove(), FADE_DURATION);\n  }, AUTO_CLOSE_DELAY);\n}\n\nexport const notify = {\n  success: message => createNotification('success', message),\n  error: message => createNotification('error', message),\n  warning: message => createNotification('warning', message),\n  info: message => createNotification('info', message),\n};\n","/**\n * Exercises API client\n */\n\nimport axios from 'axios';\nimport { notify } from '../ui/notifications.js';\n\nconst BASE_URL = 'https://your-energy.b.goit.study/api';\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n});\n\n// Error messages mapping\nconst ERROR_MESSAGES = {\n  400: 'Bad request. Please check your input.',\n  401: 'Unauthorized. Please log in.',\n  404: 'Resource not found.',\n  409: 'This email has already been used.',\n  500: 'Server error. Please try again later.',\n  default: 'Something went wrong. Please try again.',\n};\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  response => response,\n  error => {\n    if (!error.response) {\n      const message = !navigator.onLine\n        ? 'No internet connection. Please check your network.'\n        : 'Unable to connect to server. Please try again later.';\n      notify.error(message);\n      return Promise.reject(error);\n    }\n\n    const status = error.response.status;\n    const serverMessage = error.response.data?.message;\n    const message = serverMessage || ERROR_MESSAGES[status] || ERROR_MESSAGES.default;\n\n    notify.error(message);\n    return Promise.reject(error);\n  }\n);\n\n/**\n * Get daily motivation quote\n */\nexport async function getQuote() {\n  const { data } = await api.get('/quote');\n  return data;\n}\n\n/**\n * Get filters (categories)\n * @param {Object} params\n * @param {string} params.filter - Filter type (Muscles, Body parts, Equipment)\n * @param {number} params.page\n * @param {number} params.limit\n */\nexport async function getFilters({ filter, page = 1, limit = 12 }) {\n  const { data } = await api.get('/filters', {\n    params: { filter, page, limit },\n  });\n  return data;\n}\n\n/**\n * Get exercises list\n * @param {Object} params\n * @param {string} params.bodypart\n * @param {string} params.muscles\n * @param {string} params.equipment\n * @param {string} params.keyword\n * @param {number} params.page\n * @param {number} params.limit\n */\nexport async function getExercises({\n  bodypart,\n  muscles,\n  equipment,\n  keyword,\n  page = 1,\n  limit = 10,\n}) {\n  const params = { page, limit };\n  if (bodypart) params.bodypart = bodypart;\n  if (muscles) params.muscles = muscles;\n  if (equipment) params.equipment = equipment;\n  if (keyword) params.keyword = keyword;\n\n  const { data } = await api.get('/exercises', { params });\n  return data;\n}\n\n/**\n * Get exercise by ID\n * @param {string} id\n */\nexport async function getExerciseById(id) {\n  const { data } = await api.get(`/exercises/${id}`);\n  return data;\n}\n\n/**\n * Update exercise rating\n * @param {string} id\n * @param {number} rating\n * @param {string} email\n * @param {string} review\n */\nexport async function updateRating(id, rating, email, review = '') {\n  const body = { rate: rating, email };\n  if (review) {\n    body.review = review;\n  }\n  const { data } = await api.patch(`/exercises/${id}/rating`, body);\n  return data;\n}\n\n/**\n * Subscribe to newsletter\n * @param {string} email\n */\nexport async function subscribe(email) {\n  const { data } = await api.post('/subscription', { email });\n  return data;\n}\n","export default \"<li class=\\\"workout-tile {{cardClass}}\\\" data-id=\\\"{{id}}\\\">\\n  <div class=\\\"workout-tile-header\\\">\\n    <div class=\\\"workout-tile-left\\\">\\n      <span class=\\\"workout-type-badge\\\">WORKOUT</span>\\n      <span class=\\\"workout-rating\\\" aria-label=\\\"Rating: {{ratingFormatted}} out of 5\\\">\\n        {{ratingFormatted}}\\n        <svg width=\\\"18\\\" height=\\\"18\\\" class=\\\"workout-rating-star\\\" aria-hidden=\\\"true\\\">\\n          <use href=\\\"/img/sprite.svg#icon-star\\\"></use>\\n        </svg>\\n      </span>\\n      <button type=\\\"button\\\" class=\\\"bookmark-delete-btn\\\" data-id=\\\"{{id}}\\\" aria-label=\\\"Remove {{name}} from favorites\\\">\\n        <svg width=\\\"20\\\" height=\\\"20\\\" aria-hidden=\\\"true\\\">\\n          <use href=\\\"/img/sprite.svg#icon-trash\\\"></use>\\n        </svg>\\n      </button>\\n    </div>\\n    <button class=\\\"workout-start-btn\\\" data-id=\\\"{{id}}\\\" aria-label=\\\"Start exercise {{name}}\\\">\\n      Start\\n      <svg width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"/img/sprite.svg#icon-arrow\\\"></use>\\n      </svg>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"workout-tile-body\\\">\\n    <span class=\\\"workout-icon\\\">\\n      <svg width=\\\"16px\\\" height=\\\"16px\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"/img/sprite.svg#icon-quote\\\"></use>\\n      </svg>\\n    </span>\\n    <h3 class=\\\"workout-tile-title\\\">{{name}}</h3>\\n  </div>\\n\\n  <ul class=\\\"workout-tile-meta\\\">\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Burned calories:</span>\\n      <span class=\\\"meta-value\\\">{{burnedCalories}} / {{time}} min</span>\\n    </li>\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Body part:</span>\\n      <span class=\\\"meta-value\\\">{{bodyPart}}</span>\\n    </li>\\n    <li class=\\\"meta-item\\\">\\n      <span class=\\\"meta-label\\\">Target:</span>\\n      <span class=\\\"meta-value\\\">{{target}}</span>\\n    </li>\\n  </ul>\\n</li>\\n\"","export default \"<li class=\\\"section-tile\\\" data-filter=\\\"{{filter}}\\\" data-name=\\\"{{name}}\\\">\\n  <img src=\\\"{{imgURL}}\\\" alt=\\\"\\\" class=\\\"section-tile-bg\\\">\\n  <div class=\\\"section-tile-overlay\\\"></div>\\n  <div class=\\\"section-tile-content\\\">\\n    <h3 class=\\\"section-name\\\">\\n      <a href=\\\"#\\\" class=\\\"section-link\\\">{{name}}</a>\\n    </h3>\\n    <p class=\\\"section-type\\\">{{filter}}</p>\\n  </div>\\n</li>\\n\"","export default \"<div class=\\\"favorites-empty\\\">\\n  <p class=\\\"favorites-empty-text\\\">\\n    It appears that you haven't added any exercises to your favorites yet. To get started, you can\\n    add exercises that you like to your favorites for easier access in the future.\\n  </p>\\n</div>\\n\"","export default \"<ul class=\\\"pager-list\\\">\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pager-btn pager-first\\\" data-page=\\\"1\\\" aria-label=\\\"Go to first page\\\">\\n      <svg width=\\\"13\\\" height=\\\"12\\\" class=\\\"pager-icon flip\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"/img/sprite.svg#icon-double-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pager-btn pager-prev\\\" aria-label=\\\"Go to previous page\\\">\\n      <svg width=\\\"20\\\" height=\\\"20\\\" class=\\\"pager-icon flip\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"/img/sprite.svg#icon-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <ul class=\\\"pager-numbers\\\"></ul>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pager-btn pager-next\\\" aria-label=\\\"Go to next page\\\">\\n      <svg width=\\\"20\\\" height=\\\"20\\\" class=\\\"pager-icon\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"/img/sprite.svg#icon-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n  <li>\\n    <a href=\\\"#\\\" class=\\\"pager-btn pager-last\\\" aria-label=\\\"Go to last page\\\">\\n      <svg width=\\\"13\\\" height=\\\"12\\\" class=\\\"pager-icon\\\" aria-hidden=\\\"true\\\">\\n        <use href=\\\"/img/sprite.svg#icon-double-arrow-right\\\"></use>\\n      </svg>\\n    </a>\\n  </li>\\n</ul>\\n\"","/**\n * Template rendering utilities\n */\n\nimport exerciseCardTemplate from '../../partials/workout-tile.html?raw';\nimport categoryCardTemplate from '../../partials/section-tile.html?raw';\nimport favoritesEmptyTemplate from '../../partials/favorites-empty.html?raw';\nimport paginationTemplate from '../../partials/pager.html?raw';\nimport spriteUrl from '../../img/sprite.svg';\n\n// Map of template names to raw HTML\nconst templates = {\n  'workout-tile': exerciseCardTemplate,\n  'section-tile': categoryCardTemplate,\n  'favorites-empty': favoritesEmptyTemplate,\n  'pagination': paginationTemplate,\n};\n\n/**\n * Load template by name\n * @param {string} templateName\n * @returns {Promise<string>}\n */\nexport async function loadTemplate(templateName) {\n  const template = templates[templateName];\n\n  if (template) {\n    // Inject the correct sprite URL\n    return template.replace(/\\/img\\/sprite\\.svg/g, spriteUrl);\n  }\n\n  console.warn(`Template not found: ${templateName}`);\n  return '';\n}\n\n/**\n * Replace placeholders in template with data\n * @param {string} template\n * @param {Object} data\n * @returns {string}\n */\nexport function replacePlaceholders(template, data) {\n  return template.replace(/\\{\\{(\\w+)\\}\\}/g, (_match, key) => {\n    return data[key] !== undefined ? data[key] : '';\n  });\n}\n\n/**\n * Render quote in motivation section\n * @param {Object} quoteData\n */\nexport function renderQuote(quoteData) {\n  const quoteText = document.getElementById('quote-text');\n  const quoteAuthor = document.getElementById('quote-author');\n\n  if (quoteText && quoteData.quote) {\n    quoteText.textContent = quoteData.quote;\n  }\n  if (quoteAuthor && quoteData.author) {\n    quoteAuthor.textContent = quoteData.author;\n  }\n}\n\n/**\n * Render exercises grid\n * @param {Array} exercises\n * @param {string} containerId\n */\nexport async function renderExercises(exercises, containerId) {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (exercises.length === 0) {\n    container.innerHTML = '<p class=\"no-results\">No exercises found. Try another filter.</p>';\n    return;\n  }\n\n  const template = await loadTemplate('workout-tile');\n\n  const html = exercises\n    .map(exercise => {\n      return replacePlaceholders(template, {\n        id: exercise._id,\n        rating: exercise.rating || 0,\n        ratingFormatted: exercise.rating ? exercise.rating.toFixed(1) : '0.0',\n        cardClass: '',\n        name: exercise.name,\n        burnedCalories: exercise.burnedCalories || 0,\n        time: exercise.time || 0,\n        bodyPart: exercise.bodyPart || 'N/A',\n        target: exercise.target || 'N/A',\n      });\n    })\n    .join('');\n\n  container.className = 'workouts-grid';\n  container.innerHTML = html;\n}\n\n/**\n * Render categories grid\n * @param {Array} categories\n * @param {string} containerId\n */\nexport async function renderCategories(categories, containerId) {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (categories.length === 0) {\n    container.innerHTML = '<p class=\"no-results\">No categories found.</p>';\n    return;\n  }\n\n  const template = await loadTemplate('section-tile');\n\n  const html = categories\n    .map(cat => {\n      return replacePlaceholders(template, {\n        filter: cat.filter,\n        name: cat.name,\n        imgURL: cat.imgURL || '',\n      });\n    })\n    .join('');\n\n  container.className = 'sections-grid';\n  container.innerHTML = html;\n}\n\n/**\n * Render favorites grid\n * @param {Array} favorites\n * @param {string} containerId\n */\nexport async function renderFavoritesList(favorites, containerId) {\n  const container = document.getElementById(containerId);\n  if (!container) return;\n\n  if (favorites.length === 0) {\n    const template = await loadTemplate('favorites-empty');\n    container.innerHTML = template;\n    return;\n  }\n\n  const template = await loadTemplate('workout-tile');\n\n  const html = favorites\n    .map(workout => {\n      return replacePlaceholders(template, {\n        id: workout._id,\n        name: workout.name,\n        burnedCalories: workout.burnedCalories || 0,\n        time: workout.time || 0,\n        bodyPart: workout.bodyPart || 'N/A',\n        target: workout.target || 'N/A',\n        rating: workout.rating || 0,\n        ratingFormatted: workout.rating ? workout.rating.toFixed(1) : '0.0',\n        cardClass: 'is-favorite',\n      });\n    })\n    .join('');\n\n  container.className = 'favorites-grid';\n  container.innerHTML = html;\n}\n","/**\n * DOM utility functions\n */\n\n/**\n * Convert string to camelCase for dataset keys\n * @param {string} str\n * @returns {string}\n */\nfunction toCamelCase(str) {\n  return str.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n/**\n * Attach event listener only once (prevents duplicates)\n * @param {HTMLElement} element\n * @param {string} event\n * @param {Function} handler\n * @param {string} key - unique key for this listener\n */\nexport function attachOnce(element, event, handler, key = event) {\n  if (!element) return false;\n\n  const dataKey = toCamelCase(`listener-${key}`);\n  if (element.dataset[dataKey] === 'true') return false;\n\n  element.dataset[dataKey] = 'true';\n  element.addEventListener(event, handler);\n  return true;\n}\n\n/**\n * Get element by ID with type safety\n * @param {string} id\n * @returns {HTMLElement|null}\n */\nexport function $(id) {\n  return document.getElementById(id);\n}\n\n/**\n * Query selector shorthand\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {HTMLElement|null}\n */\nexport function $$(selector, parent = document) {\n  return parent.querySelector(selector);\n}\n\n/**\n * Query selector all shorthand\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {NodeListOf<HTMLElement>}\n */\nexport function $$$(selector, parent = document) {\n  return parent.querySelectorAll(selector);\n}\n\n/**\n * Scroll element into view smoothly\n * @param {string} targetId\n * @param {string} fallbackSelector\n */\nexport function scrollToElement(targetId, fallbackSelector) {\n  const target = $(targetId) || $$(fallbackSelector);\n  if (target) {\n    target.scrollIntoView({ behavior: 'smooth' });\n  }\n}\n","/**\n * Pagination UI component\n */\n\nimport { loadTemplate } from '../templates/renderer.js';\nimport { attachOnce, $, scrollToElement } from '../utils/dom.js';\n\n/**\n * Update link state (disabled/enabled)\n * @param {HTMLElement} link\n * @param {boolean} isDisabled\n * @param {number} page\n */\nfunction updateLinkState(link, isDisabled, page) {\n  if (isDisabled) {\n    link.classList.add('disabled');\n    link.setAttribute('aria-disabled', 'true');\n    link.removeAttribute('data-page');\n  } else {\n    link.classList.remove('disabled');\n    link.removeAttribute('aria-disabled');\n    link.dataset.page = page;\n  }\n}\n\n/**\n * Generate array of page numbers with ellipsis\n * Shows only 3 numbers: previous, current, next\n * @param {number} currentPage\n * @param {number} totalPages\n * @returns {Array}\n */\nfunction generatePageNumbers(currentPage, totalPages) {\n  const pages = [];\n\n  if (totalPages <= 3) {\n    for (let i = 1; i <= totalPages; i++) {\n      pages.push(i);\n    }\n    return pages;\n  }\n\n  let start, end;\n\n  if (currentPage === 1) {\n    start = 1;\n    end = 3;\n  } else if (currentPage === totalPages) {\n    start = totalPages - 2;\n    end = totalPages;\n  } else {\n    start = currentPage - 1;\n    end = currentPage + 1;\n  }\n\n  if (start > 1) {\n    pages.push('...');\n  }\n\n  for (let i = start; i <= end; i++) {\n    pages.push(i);\n  }\n\n  if (end < totalPages) {\n    pages.push('...');\n  }\n\n  return pages;\n}\n\n/**\n * Render pagination controls\n * @param {number} currentPage\n * @param {number} totalPages\n * @param {string} containerId\n */\nexport async function renderPager(currentPage, totalPages, containerId = 'pager-container') {\n  const container = $(containerId);\n  if (!container) return;\n\n  if (totalPages <= 1) {\n    container.innerHTML = '';\n    return;\n  }\n\n  // Load template if not exists\n  if (!container.querySelector('.pager-list')) {\n    const template = await loadTemplate('pagination');\n    container.innerHTML = template;\n  }\n\n  // Get navigation links\n  const firstLink = container.querySelector('.pager-first');\n  const prevLink = container.querySelector('.pager-prev');\n  const nextLink = container.querySelector('.pager-next');\n  const lastLink = container.querySelector('.pager-last');\n  const pagesContainer = container.querySelector('.pager-numbers');\n\n  // Update navigation links state\n  updateLinkState(firstLink, currentPage === 1, 1);\n  updateLinkState(prevLink, currentPage === 1, currentPage - 1);\n  updateLinkState(nextLink, currentPage === totalPages, currentPage + 1);\n  updateLinkState(lastLink, currentPage === totalPages, totalPages);\n\n  // Generate pages\n  const pages = generatePageNumbers(currentPage, totalPages);\n\n  const pagesHtml = pages\n    .map(page => {\n      if (page === '...') {\n        return `<li aria-hidden=\"true\"><span class=\"pager-dots\">...</span></li>`;\n      }\n      const isActive = page === currentPage;\n      if (isActive) {\n        return `<li><a href=\"#\" class=\"pager-number current\" aria-current=\"page\">${page}</a></li>`;\n      }\n      return `<li><a href=\"#\" class=\"pager-number\" data-page=\"${page}\">${page}</a></li>`;\n    })\n    .join('');\n\n  pagesContainer.innerHTML = pagesHtml;\n}\n\n/**\n * Setup pagination event listeners\n * @param {Function} onPageChange - Callback when page changes\n * @param {string} containerId\n */\nexport function setupPager(onPageChange, containerId = 'pager-container') {\n  const container = $(containerId);\n  if (!container) return;\n\n  const attached = attachOnce(container, 'click', e => {\n    const link = e.target.closest('.pager-number, .pager-btn');\n\n    if (!link) return;\n    if (link.classList.contains('disabled') || link.classList.contains('current')) return;\n\n    e.preventDefault();\n\n    const newPage = Number(link.dataset.page);\n    if (newPage && !isNaN(newPage)) {\n      onPageChange(newPage);\n    }\n  }, 'pager');\n\n  return attached;\n}\n\n/**\n * Scroll to top of workouts section\n * @param {string} targetId\n */\nexport function scrollToTop(targetId = 'workouts-header') {\n  scrollToElement(targetId, '.workouts-section');\n}\n","/**\n * Base modal functionality\n * Handles open/close, keyboard, and backdrop events\n */\n\nimport { attachOnce } from '../utils/dom.js';\n\n// Track active popups for stacking\nlet activePopupIds = [];\n\n/**\n * Handle Escape key to close topmost popup\n */\nfunction handleEscKey(e) {\n  if (e.key === 'Escape' && activePopupIds.length > 0) {\n    const lastPopupId = activePopupIds[activePopupIds.length - 1];\n    closePopup(lastPopupId);\n  }\n}\n\n/**\n * Open a popup modal\n * @param {string} popupId - ID of the modal element\n */\nexport function openPopup(popupId) {\n  const modal = document.getElementById(popupId);\n  if (!modal) return;\n\n  modal.classList.remove('hidden');\n  document.body.classList.add('modal-open');\n\n  if (!activePopupIds.includes(popupId)) {\n    activePopupIds.push(popupId);\n  }\n\n  // Add Esc listener if this is the first popup\n  if (activePopupIds.length === 1) {\n    document.addEventListener('keydown', handleEscKey);\n  }\n\n  // Setup backdrop click\n  const backdrop = modal.querySelector('.modal-backdrop');\n  if (backdrop) {\n    attachOnce(backdrop, 'click', () => closePopup(popupId), `backdrop-${popupId}`);\n  }\n}\n\n/**\n * Close a popup modal\n * @param {string} popupId - ID of the modal element\n */\nexport function closePopup(popupId) {\n  const modal = document.getElementById(popupId);\n  if (!modal) return;\n\n  modal.classList.add('hidden');\n  activePopupIds = activePopupIds.filter(id => id !== popupId);\n\n  if (activePopupIds.length === 0) {\n    document.body.classList.remove('modal-open');\n    document.removeEventListener('keydown', handleEscKey);\n  }\n}\n\n/**\n * Check if any popup is currently open\n */\nexport function hasOpenPopup() {\n  return activePopupIds.length > 0;\n}\n\n/**\n * Get currently active popup ID\n */\nexport function getActivePopupId() {\n  return activePopupIds[activePopupIds.length - 1] || null;\n}\n","/**\n * Rating modal functionality\n * Shared between home and favorites pages\n */\n\nimport { $ } from '../utils/dom.js';\nimport { notify } from './notifications.js';\nimport { closePopup, openPopup } from './modal.js';\nimport { updateRating } from '../api/exercises.js';\n\n// Current exercise ID for rating\nlet currentExerciseId = null;\n\n// Form submit handler reference for cleanup\nlet formSubmitHandler = null;\n\n/**\n * Get current rating value\n */\nexport function getCurrentRating() {\n  const checkedRadio = document.querySelector('#rating-stars .rating-radio:checked');\n  return checkedRadio ? parseFloat(checkedRadio.value) : 0;\n}\n\n/**\n * Reset rating form\n */\nfunction resetRatingForm() {\n  const ratingForm = $('rating-form');\n  const ratingValue = $('rating-display-value');\n\n  if (ratingForm) ratingForm.reset();\n  if (ratingValue) ratingValue.textContent = '0.0';\n}\n\n/**\n * Initialize rating stars interaction (once)\n */\nfunction initRatingStars() {\n  const starsContainer = $('rating-stars');\n  const ratingValue = $('rating-display-value');\n\n  if (!starsContainer) return;\n  if (starsContainer.dataset.listenerRating === 'true') return;\n  starsContainer.dataset.listenerRating = 'true';\n\n  starsContainer.addEventListener('change', e => {\n    if (e.target.classList.contains('rating-radio')) {\n      const rating = parseFloat(e.target.value);\n      if (ratingValue) {\n        ratingValue.textContent = rating.toFixed(1);\n      }\n    }\n  });\n}\n\n/**\n * Cleanup rating modal listeners\n */\nfunction cleanupRatingModal() {\n  const ratingForm = $('rating-form');\n  if (ratingForm && formSubmitHandler) {\n    ratingForm.removeEventListener('submit', formSubmitHandler);\n    formSubmitHandler = null;\n  }\n  currentExerciseId = null;\n}\n\n/**\n * Show rating popup\n */\nexport function showRatingPopup() {\n  closePopup('workout-modal');\n  openPopup('rating-modal');\n  resetRatingForm();\n  initRatingStars();\n}\n\n/**\n * Hide rating popup\n */\nexport function hideRatingPopup() {\n  cleanupRatingModal();\n  closePopup('rating-modal');\n  resetRatingForm();\n}\n\n/**\n * Setup rating modal for a specific exercise\n * @param {string} exerciseId\n */\nexport function setupRatingModal(exerciseId) {\n  // Cleanup previous listeners\n  cleanupRatingModal();\n\n  currentExerciseId = exerciseId;\n\n  const closeBtn = $('rating-popup-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => {\n      hideRatingPopup();\n    };\n  }\n\n  const ratingForm = $('rating-form');\n  if (ratingForm) {\n    formSubmitHandler = async e => {\n      e.preventDefault();\n\n      // Native validation\n      if (!ratingForm.checkValidity()) {\n        ratingForm.reportValidity();\n        return;\n      }\n\n      const rating = getCurrentRating();\n      const emailInput = $('rating-email');\n      const reviewInput = $('rating-review');\n      const email = emailInput?.value.trim();\n      const review = reviewInput?.value.trim() || '';\n\n      try {\n        await updateRating(currentExerciseId, rating, email, review);\n        notify.success('Rating submitted successfully!');\n        hideRatingPopup();\n      } catch (err) {\n        console.error('Failed to submit rating:', err);\n      }\n    };\n\n    ratingForm.addEventListener('submit', formSubmitHandler);\n  }\n}\n","/**\n * Favorites data store (localStorage)\n * Pure data layer - no UI logic\n */\n\nconst STORAGE_KEY = 'favoriteWorkouts';\n\n/**\n * Get all favorites from localStorage\n * @returns {Array}\n */\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(STORAGE_KEY);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (err) {\n    console.error('Failed to get favorites:', err);\n    return [];\n  }\n}\n\n/**\n * Save favorites to localStorage\n * @param {Array} favorites\n */\nfunction saveFavorites(favorites) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(favorites));\n}\n\n/**\n * Add workout to favorites\n * @param {Object} workout\n * @returns {boolean} success\n */\nexport function addFavorite(workout) {\n  try {\n    const favorites = getFavorites();\n\n    if (favorites.some(fav => fav._id === workout._id)) {\n      return false;\n    }\n\n    favorites.push(workout);\n    saveFavorites(favorites);\n    return true;\n  } catch (err) {\n    console.error('Failed to add favorite:', err);\n    return false;\n  }\n}\n\n/**\n * Remove workout from favorites\n * @param {string} workoutId\n * @returns {boolean} success\n */\nexport function removeFavorite(workoutId) {\n  try {\n    const favorites = getFavorites();\n    const filtered = favorites.filter(fav => fav._id !== workoutId);\n    saveFavorites(filtered);\n    return true;\n  } catch (err) {\n    console.error('Failed to remove favorite:', err);\n    return false;\n  }\n}\n\n/**\n * Check if workout is in favorites\n * @param {string} workoutId\n * @returns {boolean}\n */\nexport function isFavorite(workoutId) {\n  return getFavorites().some(fav => fav._id === workoutId);\n}\n\n/**\n * Toggle favorite status\n * @param {Object} workout\n * @returns {boolean} new favorite status\n */\nexport function toggleFavorite(workout) {\n  if (isFavorite(workout._id)) {\n    removeFavorite(workout._id);\n    return false;\n  }\n  addFavorite(workout);\n  return true;\n}\n","/**\n * Exercise details modal\n * Shared between home and favorites pages\n */\n\nimport spriteUrl from '../../img/sprite.svg';\nimport { $ } from '../utils/dom.js';\nimport { openPopup, closePopup } from './modal.js';\nimport { showRatingPopup, setupRatingModal } from './rating-modal.js';\nimport { isFavorite, addFavorite, removeFavorite } from '../services/favorites-store.js';\nimport { getExerciseById } from '../api/exercises.js';\n\n/**\n * Cleanup exercise modal listeners\n */\nfunction cleanupExerciseModal() {\n  const closeBtn = $('modal-close-btn');\n  const giveRatingBtn = $('give-rating-btn');\n  const addToFavoritesBtn = $('add-to-favorites-btn');\n\n  if (closeBtn) closeBtn.onclick = null;\n  if (giveRatingBtn) giveRatingBtn.onclick = null;\n  if (addToFavoritesBtn) addToFavoritesBtn.onclick = null;\n}\n\n/**\n * Render workout details in popup\n * @param {Object} workout\n */\nexport function renderWorkoutPopup(workout) {\n  if (!workout) return;\n\n  // Update GIF\n  const gifElement = $('modal-workout-gif');\n  if (gifElement) {\n    gifElement.src = workout.gifUrl || '';\n    gifElement.alt = workout.name || 'Workout';\n  }\n\n  // Update title\n  const titleElement = $('modal-workout-title');\n  if (titleElement) {\n    titleElement.textContent = workout.name || 'Workout';\n  }\n\n  // Update rating\n  const ratingElement = $('modal-workout-rating');\n  if (ratingElement) {\n    const rating = workout.rating || 0;\n    const fullStars = Math.floor(rating);\n\n    ratingElement.innerHTML = `\n      <span class=\"rating-value\">${rating.toFixed(1)}</span>\n      <div class=\"rating-stars\">\n        ${Array.from({ length: 5 }, (_, i) => {\n          const filled = i < fullStars ? 'filled' : '';\n          return `<svg class=\"star ${filled}\" width=\"18\" height=\"18\" aria-hidden=\"true\">\n            <use href=\"${spriteUrl}#icon-star\"></use>\n          </svg>`;\n        }).join('')}\n      </div>\n    `;\n  }\n\n  // Update details\n  const targetElement = $('modal-target');\n  if (targetElement) targetElement.textContent = workout.target || 'N/A';\n\n  const bodyPartElement = $('modal-bodypart');\n  if (bodyPartElement) bodyPartElement.textContent = workout.bodyPart || 'N/A';\n\n  const equipmentElement = $('modal-equipment');\n  if (equipmentElement) equipmentElement.textContent = workout.equipment || 'N/A';\n\n  const popularElement = $('modal-popular');\n  if (popularElement) popularElement.textContent = workout.popularity || '0';\n\n  const caloriesElement = $('modal-calories');\n  if (caloriesElement) {\n    caloriesElement.textContent = `${workout.burnedCalories || 0}/${workout.time || 0} min`;\n  }\n\n  // Update description\n  const descriptionElement = $('modal-description');\n  if (descriptionElement) {\n    descriptionElement.textContent = workout.description || 'No description available.';\n  }\n\n  // Store workout ID\n  const popup = $('workout-popup');\n  if (popup) {\n    popup.dataset.workoutId = workout._id;\n  }\n}\n\n/**\n * Update favorite button appearance\n * @param {string} exerciseId\n */\nfunction updateFavoriteButton(exerciseId) {\n  const btn = $('add-to-favorites-btn');\n  if (!btn) return;\n\n  if (isFavorite(exerciseId)) {\n    btn.innerHTML = `\n      <span class=\"btn-text\">Remove from favorites</span>\n      <svg width=\"20\" height=\"20\" aria-hidden=\"true\">\n        <use href=\"${spriteUrl}#icon-trash\"></use>\n      </svg>\n    `;\n  } else {\n    btn.innerHTML = `\n      <span class=\"btn-text\">Add to favorites</span>\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" aria-hidden=\"true\">\n        <path d=\"M10 3.5C10 3.5 6.5 1 3.5 3.5C0.5 6 2 10 10 16.5C18 10 19.5 6 16.5 3.5C13.5 1 10 3.5 10 3.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n      </svg>\n    `;\n  }\n}\n\n/**\n * Setup exercise modal for a specific exercise\n * @param {string} exerciseId\n * @param {Object} options\n * @param {Function} options.onFavoriteChange - Callback when favorite status changes\n */\nexport function setupExerciseModal(exerciseId, options = {}) {\n  // Cleanup previous listeners\n  cleanupExerciseModal();\n\n  const { onFavoriteChange } = options;\n\n  // Close button\n  const closeBtn = $('modal-close-btn');\n  if (closeBtn) {\n    closeBtn.onclick = () => {\n      cleanupExerciseModal();\n      closePopup('workout-modal');\n    };\n  }\n\n  // Rating button\n  const giveRatingBtn = $('give-rating-btn');\n  if (giveRatingBtn) {\n    giveRatingBtn.onclick = () => {\n      showRatingPopup();\n      setupRatingModal(exerciseId);\n    };\n  }\n\n  // Favorites button\n  const addToFavoritesBtn = $('add-to-favorites-btn');\n  if (addToFavoritesBtn) {\n    updateFavoriteButton(exerciseId);\n\n    addToFavoritesBtn.onclick = async () => {\n      if (isFavorite(exerciseId)) {\n        removeFavorite(exerciseId);\n      } else {\n        const exercise = await getExerciseById(exerciseId);\n        addFavorite(exercise);\n      }\n      updateFavoriteButton(exerciseId);\n\n      if (onFavoriteChange) {\n        onFavoriteChange(exerciseId, isFavorite(exerciseId));\n      }\n    };\n  }\n}\n\n/**\n * Open exercise modal with workout data\n * @param {string} exerciseId\n * @param {Object} options\n */\nexport async function openExerciseModal(exerciseId, options = {}) {\n  try {\n    const exercise = await getExerciseById(exerciseId);\n    renderWorkoutPopup(exercise);\n    openPopup('workout-modal');\n    setupExerciseModal(exerciseId, options);\n  } catch (err) {\n    console.error(`Failed to fetch exercise details for ${exerciseId}:`, err);\n  }\n}\n","/**\n * Motivation of the Day service\n * Fetches and caches daily quotes\n */\n\nimport { getQuote } from '../api/exercises.js';\nimport { renderQuote } from '../templates/renderer.js';\n\nconst STORAGE_KEY = 'motivation-of-the-day';\n\n/**\n * Get today's date in YYYY-MM-DD format\n */\nfunction getTodayDate() {\n  return new Date().toISOString().split('T')[0];\n}\n\n/**\n * Get cached motivation from localStorage\n * @returns {Object|null}\n */\nfunction getCachedMotivation() {\n  try {\n    const cached = localStorage.getItem(STORAGE_KEY);\n    if (!cached) return null;\n\n    const { quote, author, date } = JSON.parse(cached);\n\n    if (date === getTodayDate()) {\n      return { quote, author };\n    }\n\n    localStorage.removeItem(STORAGE_KEY);\n    return null;\n  } catch (error) {\n    console.error('Error reading cached motivation:', error);\n    return null;\n  }\n}\n\n/**\n * Save motivation to localStorage\n * @param {string} quote\n * @param {string} author\n */\nfunction cacheMotivation(quote, author) {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify({\n      quote,\n      author,\n      date: getTodayDate(),\n    }));\n  } catch (error) {\n    console.error('Error caching motivation:', error);\n  }\n}\n\n/**\n * Initialize Motivation of the Day\n * Checks cache first, otherwise fetches from API\n */\nexport async function initMotivation() {\n  try {\n    let motivationData = getCachedMotivation();\n\n    if (!motivationData) {\n      motivationData = await getQuote();\n      cacheMotivation(motivationData.quote, motivationData.author);\n    }\n\n    renderQuote(motivationData);\n  } catch (err) {\n    console.error('Failed to initialize motivation:', err);\n  }\n}\n","/**\n * Responsive breakpoints and utilities\n */\n\nexport const BREAKPOINTS = {\n  mobile: 767,\n  tablet: 1439,\n  desktop: 1440,\n};\n\n/**\n * Check if current viewport is mobile\n */\nexport function isMobile() {\n  return window.innerWidth <= BREAKPOINTS.mobile;\n}\n\n/**\n * Check if current viewport is tablet\n */\nexport function isTablet() {\n  return window.innerWidth > BREAKPOINTS.mobile && window.innerWidth < BREAKPOINTS.desktop;\n}\n\n/**\n * Check if current viewport is desktop\n */\nexport function isDesktop() {\n  return window.innerWidth >= BREAKPOINTS.desktop;\n}\n\n/**\n * Get items limit for categories grid\n */\nexport function getCategoriesLimit() {\n  return isMobile() ? 9 : 12;\n}\n\n/**\n * Get items limit for exercises grid\n */\nexport function getExercisesLimit() {\n  return isMobile() ? 8 : 10;\n}\n\n/**\n * Get items per page for favorites\n */\nexport function getFavoritesPerPage() {\n  if (isDesktop()) return Infinity;\n  if (isTablet()) return 10;\n  return 8;\n}\n\n/**\n * Check if favorites should use pagination\n */\nexport function shouldPaginateFavorites() {\n  return !isDesktop();\n}\n\n/**\n * Create debounced resize handler\n * @param {Function} callback\n * @param {number} delay\n * @returns {Function} cleanup function\n */\nexport function onResize(callback, delay = 300) {\n  let timeoutId;\n\n  const handler = () => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(callback, delay);\n  };\n\n  window.addEventListener('resize', handler);\n\n  return () => {\n    clearTimeout(timeoutId);\n    window.removeEventListener('resize', handler);\n  };\n}\n","/**\n * Home Page Controller\n * Manages categories, exercises, search, and modals\n */\n\nimport { getFilters, getExercises } from '../api/exercises.js';\nimport { renderCategories, renderExercises } from '../templates/renderer.js';\nimport { renderPager, setupPager, scrollToTop } from '../ui/pagination.js';\nimport { openExerciseModal } from '../ui/exercise-modal.js';\nimport { initMotivation } from '../services/motivation.js';\nimport { attachOnce, $ } from '../utils/dom.js';\nimport { getCategoriesLimit, getExercisesLimit, onResize } from '../utils/responsive.js';\n\n// Page state\nconst state = {\n  view: 'categories', // 'categories' or 'exercises'\n  filter: 'Muscles',  // Active tab\n  category: null,     // Selected category name\n  categoryFilter: null, // Filter type of selected category\n  keyword: '',\n  page: 1,\n};\n\n/**\n * Get items limit based on current view\n */\nfunction getLimit() {\n  return state.view === 'categories' ? getCategoriesLimit() : getExercisesLimit();\n}\n\n/**\n * Fetch and render based on current state\n */\nasync function fetchAndRender() {\n  const container = $('workouts-container');\n\n  try {\n    const limit = getLimit();\n\n    if (state.view === 'categories') {\n      const filters = await getFilters({\n        filter: state.filter,\n        page: state.page,\n        limit,\n      });\n      renderCategories(filters.results, 'workouts-container');\n      renderPager(filters.page ? Number(filters.page) : 1, filters.totalPages || 1);\n    } else {\n      const params = {\n        limit,\n        page: state.page,\n      };\n\n      if (state.categoryFilter === 'Muscles') params.muscles = state.category.toLowerCase();\n      else if (state.categoryFilter === 'Body parts') params.bodypart = state.category.toLowerCase();\n      else if (state.categoryFilter === 'Equipment') params.equipment = state.category.toLowerCase();\n\n      if (state.keyword) params.keyword = state.keyword;\n\n      const exercises = await getExercises(params);\n      renderExercises(exercises.results, 'workouts-container');\n      renderPager(exercises.page ? Number(exercises.page) : 1, exercises.totalPages || 1);\n    }\n  } catch (err) {\n    console.error('Fetch error:', err);\n    if (container) {\n      container.innerHTML = '<p class=\"error-message\">Failed to load data. Please try again.</p>';\n    }\n  }\n}\n\n/**\n * Handle page change from pagination\n */\nfunction handlePageChange(newPage) {\n  if (newPage && newPage !== state.page) {\n    state.page = newPage;\n    fetchAndRender();\n    scrollToTop();\n  }\n}\n\n/**\n * Show exercises header with breadcrumb\n */\nfunction showExercisesHeader(categoryName) {\n  const sectionTitle = $('section-title');\n  const searchForm = $('exercise-search-form');\n\n  if (sectionTitle) {\n    sectionTitle.innerHTML = `Exercises / <span class=\"section-name\">${categoryName}</span>`;\n  }\n\n  if (searchForm) {\n    searchForm.classList.remove('hidden');\n  }\n}\n\n/**\n * Hide exercises header\n */\nfunction hideExercisesHeader() {\n  const sectionTitle = $('section-title');\n  const searchForm = $('exercise-search-form');\n  const searchInput = $('exercise-search-input');\n  const clearBtn = $('exercise-clear-btn');\n\n  if (sectionTitle) {\n    sectionTitle.textContent = 'Exercises';\n  }\n\n  if (searchForm) {\n    searchForm.classList.add('hidden');\n  }\n\n  if (searchInput) {\n    searchInput.value = '';\n  }\n\n  if (clearBtn) {\n    clearBtn.classList.add('hidden');\n  }\n}\n\n/**\n * Setup filter tabs\n */\nfunction setupFilterTabs() {\n  const filterTabs = $('filter-tabs');\n  if (!filterTabs) return;\n\n  attachOnce(filterTabs, 'click', async e => {\n    const btn = e.target.closest('.filter-tab');\n    if (!btn) return;\n\n    document.querySelectorAll('.filter-tab').forEach(t => {\n      t.classList.remove('active');\n      t.setAttribute('aria-selected', 'false');\n    });\n    btn.classList.add('active');\n    btn.setAttribute('aria-selected', 'true');\n\n    state.filter = btn.dataset.filter;\n    state.view = 'categories';\n    state.page = 1;\n    state.keyword = '';\n    state.category = null;\n\n    hideExercisesHeader();\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to fetch data:', err);\n    }\n  }, 'filter-tabs');\n}\n\n/**\n * Setup exercise search\n */\nfunction setupExerciseSearch() {\n  const searchForm = $('exercise-search-form');\n  const searchInput = $('exercise-search-input');\n  const clearBtn = $('exercise-clear-btn');\n\n  if (!searchForm || !searchInput) return;\n\n  attachOnce(searchInput, 'input', () => {\n    if (searchInput.value.trim()) {\n      clearBtn.classList.remove('hidden');\n    } else {\n      clearBtn.classList.add('hidden');\n    }\n  }, 'search-input');\n\n  attachOnce(clearBtn, 'click', async () => {\n    searchInput.value = '';\n    clearBtn.classList.add('hidden');\n    searchInput.focus();\n\n    state.keyword = '';\n    state.page = 1;\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to fetch exercises:', err);\n    }\n  }, 'search-clear');\n\n  attachOnce(searchForm, 'submit', async e => {\n    e.preventDefault();\n\n    state.keyword = searchInput.value.trim();\n    state.page = 1;\n\n    try {\n      await fetchAndRender();\n    } catch (err) {\n      console.error('Failed to search exercises:', err);\n    }\n  }, 'search-submit');\n}\n\n/**\n * Setup workout container event delegation\n */\nfunction setupWorkoutContainer() {\n  const container = $('workouts-container');\n  if (!container) return;\n\n  attachOnce(container, 'click', async e => {\n    // Handle category card clicks\n    const categoryCard = e.target.closest('.section-tile');\n    if (categoryCard) {\n      e.preventDefault();\n      const categoryName = categoryCard.dataset.name;\n      const categoryFilter = categoryCard.dataset.filter;\n\n      if (!categoryName) return;\n\n      state.view = 'exercises';\n      state.category = categoryName;\n      state.categoryFilter = categoryFilter;\n      state.page = 1;\n      state.keyword = '';\n\n      showExercisesHeader(categoryName);\n      setupExerciseSearch();\n\n      try {\n        await fetchAndRender();\n      } catch (err) {\n        console.error('Failed to fetch exercises:', err);\n      }\n      return;\n    }\n\n    // Handle Start button clicks\n    const startBtn = e.target.closest('.workout-start-btn');\n    if (startBtn) {\n      const exerciseId = startBtn.dataset.id;\n      if (exerciseId) {\n        openExerciseModal(exerciseId);\n      }\n    }\n  }, 'workouts');\n}\n\n/**\n * Setup resize listener\n */\nfunction setupResizeListener() {\n  let currentLimit = getLimit();\n\n  onResize(() => {\n    const newLimit = getLimit();\n    if (newLimit !== currentLimit) {\n      currentLimit = newLimit;\n      state.page = 1;\n      fetchAndRender();\n    }\n  });\n}\n\n/**\n * Initialize home page\n */\nexport async function initHomePage() {\n  const mainContent = document.querySelector('.main-content');\n\n  try {\n    await initMotivation();\n    await fetchAndRender();\n  } catch (err) {\n    console.error('Error initializing home page:', err);\n  } finally {\n    if (mainContent) {\n      mainContent.classList.add('loaded');\n    }\n  }\n\n  setupFilterTabs();\n  setupWorkoutContainer();\n  setupPager(handlePageChange);\n  setupResizeListener();\n}\n","/**\n * Favorites Page Controller\n */\n\nimport { getFavorites, removeFavorite } from '../services/favorites-store.js';\nimport { renderFavoritesList } from '../templates/renderer.js';\nimport { renderPager, setupPager } from '../ui/pagination.js';\nimport { openExerciseModal } from '../ui/exercise-modal.js';\nimport { closePopup } from '../ui/modal.js';\nimport { initMotivation } from '../services/motivation.js';\nimport { attachOnce, $ } from '../utils/dom.js';\nimport { getFavoritesPerPage, shouldPaginateFavorites, onResize } from '../utils/responsive.js';\n\n// Page state\nconst state = {\n  page: 1,\n};\n\n/**\n * Render favorites with pagination\n */\nasync function renderFavorites() {\n  const container = $('favorites-container');\n  if (!container) return;\n\n  const allFavorites = getFavorites();\n\n  if (allFavorites.length === 0) {\n    await renderFavoritesList([], 'favorites-container');\n    renderPager(1, 1, 'favorites-pager');\n    return;\n  }\n\n  const perPage = getFavoritesPerPage();\n  const shouldPaginate = shouldPaginateFavorites();\n  const totalPages = shouldPaginate ? Math.ceil(allFavorites.length / perPage) : 1;\n\n  // Ensure current page is valid\n  if (state.page > totalPages) {\n    state.page = totalPages;\n  }\n\n  // Get items for current page\n  const startIndex = shouldPaginate ? (state.page - 1) * perPage : 0;\n  const endIndex = shouldPaginate ? startIndex + perPage : allFavorites.length;\n  const favorites = allFavorites.slice(startIndex, endIndex);\n\n  await renderFavoritesList(favorites, 'favorites-container');\n\n  if (shouldPaginate) {\n    renderPager(state.page, totalPages, 'favorites-pager');\n  }\n}\n\n/**\n * Handle page change\n */\nfunction handlePageChange(newPage) {\n  if (newPage && newPage !== state.page) {\n    state.page = newPage;\n    renderFavorites();\n  }\n}\n\n/**\n * Handle favorite removal from modal\n */\nasync function handleFavoriteRemoved(workoutId) {\n  closePopup('workout-popup');\n  closePopup('workout-modal');\n  await renderFavorites();\n}\n\n/**\n * Setup favorites container event delegation\n */\nfunction setupFavoritesContainer() {\n  const container = $('favorites-container');\n  if (!container) return;\n\n  attachOnce(container, 'click', async e => {\n    // Handle delete button clicks\n    const deleteBtn = e.target.closest('.bookmark-delete-btn');\n    if (deleteBtn) {\n      e.stopPropagation();\n      const workoutId = deleteBtn.dataset.id;\n      if (workoutId) {\n        removeFavorite(workoutId);\n        try {\n          await renderFavorites();\n        } catch (err) {\n          console.error('Failed to render favorites:', err);\n        }\n      }\n      return;\n    }\n\n    // Handle start button clicks\n    const startBtn = e.target.closest('.workout-start-btn');\n    if (startBtn) {\n      e.stopPropagation();\n      const workoutId = startBtn.dataset.id;\n      if (workoutId) {\n        openExerciseModal(workoutId, {\n          onFavoriteChange: (id, isFavorite) => {\n            if (!isFavorite) {\n              handleFavoriteRemoved(id);\n            }\n          },\n        });\n      }\n    }\n  }, 'favorites');\n}\n\n/**\n * Setup resize listener\n */\nfunction setupResizeListener() {\n  let currentPerPage = getFavoritesPerPage();\n\n  onResize(() => {\n    const newPerPage = getFavoritesPerPage();\n    if (newPerPage !== currentPerPage) {\n      currentPerPage = newPerPage;\n      state.page = 1;\n      renderFavorites();\n    }\n  });\n}\n\n/**\n * Initialize favorites page\n */\nexport async function initFavoritesPage() {\n  const favoritesPage = document.querySelector('.favorites-page');\n\n  try {\n    await initMotivation();\n    await renderFavorites();\n\n    setupFavoritesContainer();\n    setupPager(handlePageChange, 'favorites-pager');\n    setupResizeListener();\n  } catch (err) {\n    console.error('Error initializing favorites page:', err);\n  } finally {\n    if (favoritesPage) {\n      favoritesPage.classList.add('loaded');\n    }\n  }\n}\n","/**\n * Navigation component\n * Burger menu and active link handling\n */\n\nimport { $ } from '../utils/dom.js';\n\n/**\n * Open mobile menu\n */\nfunction openMobileMenu() {\n  const mobileMenu = $('mobile-menu');\n  const burgerBtn = $('burger-btn');\n\n  if (mobileMenu) {\n    mobileMenu.showModal();\n    document.body.style.overflow = 'hidden';\n  }\n\n  if (burgerBtn) {\n    burgerBtn.setAttribute('aria-expanded', 'true');\n  }\n}\n\n/**\n * Close mobile menu\n */\nfunction closeMobileMenu() {\n  const mobileMenu = $('mobile-menu');\n\n  if (mobileMenu) {\n    mobileMenu.close();\n  }\n}\n\n/**\n * Setup burger menu functionality\n */\nfunction setupBurgerMenu() {\n  const burgerBtn = $('burger-btn');\n  const mobileMenu = $('mobile-menu');\n  const mobileCloseBtn = $('mobile-close-btn');\n\n  if (!burgerBtn || !mobileMenu || !mobileCloseBtn) return;\n\n  burgerBtn.addEventListener('click', openMobileMenu);\n  mobileCloseBtn.addEventListener('click', closeMobileMenu);\n\n  // Close on backdrop click\n  mobileMenu.addEventListener('click', e => {\n    if (e.target === mobileMenu) {\n      closeMobileMenu();\n    }\n  });\n\n  // Close on navigation link click\n  const mobileNavLinks = mobileMenu.querySelectorAll('.mobile-nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', closeMobileMenu);\n  });\n\n  // Native dialog handles Escape key automatically\n  mobileMenu.addEventListener('close', () => {\n    burgerBtn.setAttribute('aria-expanded', 'false');\n    document.body.style.overflow = '';\n  });\n}\n\n/**\n * Set active navigation link based on current page\n */\nfunction setActiveNavLink() {\n  const currentPath = window.location.pathname;\n  const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');\n\n  navLinks.forEach(link => {\n    const href = link.getAttribute('href');\n    const isActive =\n      currentPath.endsWith(href.replace('./', '/')) ||\n      (currentPath.endsWith('/') && href.includes('index.html')) ||\n      (currentPath.endsWith('/index.html') && href.includes('index.html')) ||\n      (currentPath.includes('favorites') && href.includes('favorites'));\n\n    if (isActive) {\n      link.setAttribute('aria-current', 'page');\n      link.classList.add('active');\n    } else {\n      link.removeAttribute('aria-current');\n      link.classList.remove('active');\n    }\n  });\n}\n\n/**\n * Initialize navigation\n */\nexport function initNav() {\n  setupBurgerMenu();\n  setActiveNavLink();\n}\n\n// Auto-initialize on DOMContentLoaded\ndocument.addEventListener('DOMContentLoaded', initNav);\n","import { initHomePage } from './js/pages/home.js';\nimport { initFavoritesPage } from './js/pages/favorites.js';\nimport { subscribe } from './js/api/exercises.js';\nimport { notify } from './js/ui/notifications.js';\nimport './js/components/nav.js';\n\nfunction setActiveNav() {\n  const path = window.location.pathname;\n  const navHome = document.getElementById('nav-home');\n  const navFavorites = document.getElementById('nav-favorites');\n\n  if (path.includes('favorites')) {\n    navFavorites?.classList.add('active');\n  } else {\n    navHome?.classList.add('active');\n  }\n}\n\nfunction setupSubscription() {\n  const subForm = document.getElementById('subscription-form');\n  if (subForm) {\n    subForm.addEventListener('submit', async e => {\n      e.preventDefault();\n      const email = subForm.email.value;\n      try {\n        await subscribe(email);\n        notify.success('Successfully subscribed!');\n        subForm.reset();\n      } catch (err) {\n        // Error notify is shown by API interceptor\n      }\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setActiveNav();\n  setupSubscription();\n\n  // Initialize page-specific functionality based on elements present\n  if (document.getElementById('workouts-container')) {\n    initHomePage();\n  }\n\n  if (document.getElementById('favorites-container')) {\n    initFavoritesPage();\n  }\n});\n"],"names":["spriteUrl","ICONS","AUTO_CLOSE_DELAY","FADE_DURATION","getContainer","container","createNotification","type","message","iconName","notification","notify","BASE_URL","api","axios","ERROR_MESSAGES","response","error","status","_a","getQuote","data","getFilters","filter","page","limit","getExercises","bodypart","muscles","equipment","keyword","params","getExerciseById","id","updateRating","rating","email","review","body","subscribe","exerciseCardTemplate","categoryCardTemplate","favoritesEmptyTemplate","paginationTemplate","templates","loadTemplate","templateName","template","replacePlaceholders","_match","key","renderQuote","quoteData","quoteText","quoteAuthor","renderExercises","exercises","containerId","html","exercise","renderCategories","categories","cat","renderFavoritesList","favorites","workout","toCamelCase","str","_","letter","attachOnce","element","event","handler","dataKey","$","$$","selector","parent","scrollToElement","targetId","fallbackSelector","target","updateLinkState","link","isDisabled","generatePageNumbers","currentPage","totalPages","pages","i","start","end","renderPager","firstLink","prevLink","nextLink","lastLink","pagesContainer","pagesHtml","setupPager","onPageChange","e","newPage","scrollToTop","activePopupIds","handleEscKey","lastPopupId","closePopup","openPopup","popupId","modal","backdrop","currentExerciseId","formSubmitHandler","getCurrentRating","checkedRadio","resetRatingForm","ratingForm","ratingValue","initRatingStars","starsContainer","cleanupRatingModal","showRatingPopup","hideRatingPopup","setupRatingModal","exerciseId","closeBtn","emailInput","reviewInput","err","STORAGE_KEY","getFavorites","saveFavorites","addFavorite","fav","removeFavorite","workoutId","filtered","isFavorite","cleanupExerciseModal","giveRatingBtn","addToFavoritesBtn","renderWorkoutPopup","gifElement","titleElement","ratingElement","fullStars","targetElement","bodyPartElement","equipmentElement","popularElement","caloriesElement","descriptionElement","popup","updateFavoriteButton","btn","setupExerciseModal","options","onFavoriteChange","openExerciseModal","getTodayDate","getCachedMotivation","cached","quote","author","date","cacheMotivation","initMotivation","motivationData","BREAKPOINTS","isMobile","isTablet","isDesktop","getCategoriesLimit","getExercisesLimit","getFavoritesPerPage","shouldPaginateFavorites","onResize","callback","delay","timeoutId","state","getLimit","fetchAndRender","filters","handlePageChange","showExercisesHeader","categoryName","sectionTitle","searchForm","hideExercisesHeader","searchInput","clearBtn","setupFilterTabs","filterTabs","t","setupExerciseSearch","setupWorkoutContainer","categoryCard","categoryFilter","startBtn","setupResizeListener","currentLimit","newLimit","initHomePage","mainContent","renderFavorites","allFavorites","perPage","shouldPaginate","startIndex","endIndex","handleFavoriteRemoved","setupFavoritesContainer","deleteBtn","currentPerPage","newPerPage","initFavoritesPage","favoritesPage","openMobileMenu","mobileMenu","burgerBtn","closeMobileMenu","setupBurgerMenu","mobileCloseBtn","setActiveNavLink","currentPath","href","initNav","setActiveNav","path","navHome","navFavorites","setupSubscription","subForm"],"mappings":"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"}